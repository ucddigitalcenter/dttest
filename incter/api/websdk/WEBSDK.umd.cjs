(function(S,c){typeof exports=="object"&&typeof module<"u"?module.exports=c():typeof define=="function"&&define.amd?define(c):(S=typeof globalThis<"u"?globalThis:S||self,S.WEBSDK=c())})(this,function(){"use strict";var S,c={data:null,loadcallback:null,_EnableClick(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("EnableClick","vii",[typeof EnableLayers,typeof n],[e,n])}catch(t){console.log(t)}},_HighLightById(e,n,t,o){try{window.unitygameinstance.Module.DynCallCSFunc("HighLightById","iiiii",[typeof e,typeof n,typeof t,typeof JSON.stringify(o)],[e,n,t,JSON.stringify(o)])}catch(l){console.log(l)}},_GetPropertyById(e,n){try{let t=window.unitygameinstance.Module.DynCallCSFunc("GetPropertyById","iii",[typeof e,typeof n],[e,n]);return console.log(new Array(t)),new Array({name:t.split("[")})}catch(t){console.log(t)}},_GetObjectAllPropertiesById(e){try{let n=window.unitygameinstance.Module.DynCallCSFunc("GetObjectAllPropertiesById","ii",[typeof e],[e]);return JSON.parse(JSON.stringify(n))}catch(n){console.log(n)}},_SetHoverLayer(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetHoverLayer","vi",[typeof e],[e])}catch(n){console.log(n)}},_ClearHoverLayer(){try{window.unitygameinstance.Module.DynCallCSFunc("ClearHoverLayer","v",[],[])}catch(e){console.log(e)}},_EnableHover(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("EnableHover","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_SetClickLayer(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetClickLayer","vi",[typeof e],[e])}catch(n){console.log(n)}},_ClearClickLayer(){try{window.unitygameinstance.Module.DynCallCSFunc("ClearClickLayer","v",[],[])}catch(e){console.log(e)}},_EnableDrag(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("EnableDrag","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_SetDragLayer(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetDragLayer","vi",[typeof e],[e])}catch(n){console.log(n)}},_ClearDragLayer(){try{window.unitygameinstance.Module.DynCallCSFunc("ClearDragLayer","v",[],[])}catch(e){console.log(e)}},_ShowSelects(){try{window.unitygameinstance.Module.DynCallCSFunc("ShowSelects","v",[],[])}catch(e){console.log(e)}},_GetShownObjs(){try{let e=window.unitygameinstance.Module.DynCallCSFunc("GetShownObjs","i",[],[]);return console.log(e),JSON.parse(JSON.stringify(e))}catch(e){console.log(e)}},_ShowObj(e){try{window.unitygameinstance.Module.DynCallCSFunc("ShowObj","vi",[typeof e],[e])}catch(n){console.log(n)}},_ShowSelects(e){try{window.unitygameinstance.Module.DynCallCSFunc("ShowSelects","vi",[typeof e],[e])}catch(n){console.log(n)}},_HideObj(e){try{window.unitygameinstance.Module.DynCallCSFunc("HideObj","vi",[typeof e],[e])}catch(n){console.log(n)}},_HideAllObjs(){try{window.unitygameinstance.Module.DynCallCSFunc("HideAllObjs","v",[],[])}catch(e){console.log(e)}},_HideObj(e){try{window.unitygameinstance.Module.DynCallCSFunc("HideObj","vi",[typeof e],[e])}catch(n){console.log(n)}},_GetHiddenObjs(){try{let e=window.unitygameinstance.Module.DynCallCSFunc("GetHiddenObjs","i",[],[]);return console.log(JSON.parse(JSON.stringify(e))),JSON.parse(JSON.stringify(e))}catch(e){console.log(e)}},_GetComponentsInfo(e){try{let n=window.unitygameinstance.Module.DynCallCSFunc("GetComponentsInfo","ii",[typeof e],[e]);return console.log(n),n}catch(n){console.log(n)}},_EnableRectSelect(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("EnableRectSelect","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_GetLayers(){try{return window.unitygameinstance.Module.DynCallCSFunc("GetLayers","i",[],[])}catch(e){console.log(e)}},_ID2UUID(e){try{let n=window.unitygameinstance.Module.DynCallCSFunc("ID2UUID","ii",[typeof e],[e]);return console.log(JSON.parse(JSON.stringify(n))),JSON.parse(JSON.stringify(n))}catch(n){console.log(n)}},_UUID2ID(e){try{let n=window.unitygameinstance.Module.DynCallCSFunc("UUID2ID","ii",[typeof e],[e]);return console.log(JSON.parse(JSON.stringify(n))),JSON.parse(JSON.stringify(n))}catch(n){console.log(n)}},_GetPlayerInfo(){try{let e=window.unitygameinstance.Module.DynCallCSFunc("GetPlayerInfo","i",[],[]);return console.log(JSON.parse(JSON.stringify(e))),JSON.parse(JSON.stringify(e))}catch(e){console.log(e)}},_EnableMove(e){try{window.unitygameinstance.Module.DynCallCSFunc("EnableMove","vi",[typeof e],[e])}catch(n){console.log(n)}},_SetPlayerPosition(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("SetPlayerPosition","vfff",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_SetPlayerEuler(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("SetPlayerEuler","vfff",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_SetObjectEuler(e,n,t,o){try{window.unitygameinstance.Module.DynCallCSFunc("SetObjectEuler","vifff",[typeof e,typeof n,typeof t,typeof o],[e,n,t,o])}catch(l){console.log(l)}},_SetObjectPosition(e,n,t,o){try{window.unitygameinstance.Module.DynCallCSFunc("SetObjectPosition","vifff",[typeof e,typeof n,typeof t,typeof o],[e,n,t,o])}catch(l){console.log(l)}},_LoadAndInstantiate(e,n,t){try{window.unitygameinstance.Model.Destroylayer("LoadAndInstantiate","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch{}},_InstantiateObject(e,n,t,o){try{window.unitygameinstance.Module.DynCallCSFunc("InstantiateObject","viiii",[typeof e,typeof n,typeof t,typeof o],[e,n,t,o])}catch(l){console.log(l)}},_UnLoadAssetBundle(e,n,t){window.unitygameinstance.Module.DynCallCSFunc("UnLoadAssetBundle","viii",[typeof e,typeof n,typeof t],[e,n,t])},_UnloadAllAssetBundles(e,n){window.unitygameinstance.Module.DynCallCSFunc("UnloadAllAssetBundlesCS","vii",[typeof e,typeof n],[e,n])},_DestroyObject(e,n){window.unitygameinstance.Module.DynCallCSFunc("DestroyObject","vii",[typeof e,typeof n],[e,n])},_DestroyAllObject(e){window.unitygameinstance.Module.DynCallCSFunc("DestroyAllObject","vi",[typeof e],[e])},_EnableWalk(e){window.unitygameinstance.Module.DynCallCSFunc("EnableWalk","vi",[typeof e],[e])},_GetBoundsSizeByID(e){let n=window.unitygameinstance.Module.DynCallCSFunc("GetBoundsSizeByID","ii",[typeof e],[e]);return console.log(JSON.parse(JSON.stringify(n))),JSON.parse(JSON.stringify(n))},_GetBoundsCenterByID(e){let n=window.unitygameinstance.Module.DynCallCSFunc("GetBoundsCenterByID","ii",[typeof e],[e]);return console.log(JSON.parse(JSON.stringify(n))),JSON.parse(JSON.stringify(n))},_GetMainCanvasWH(e){let n=window.unitygameinstance.Module.DynCallCSFunc("GetMainCanvasWH","ii",[typeof e],[e]);return JSON.parse(JSON.stringify(n))},_UIAutoFit(e){window.unitygameinstance.Module.DynCallCSFunc("UIAutoFit","vi",[typeof e],[e])},_createElement(){let e=document.getElementById("UCDunity");e.innerHTML=`<div class="unity-con" style="width:100%;height:100%">
    <div id="unity-container" class="unity-desktop" style="width:100%;height:100%">
      <canvas id="unity-canvas" width=960 height=600 tabindex="-1"></canvas>
      <div id="unity-loading-bar">
        <div id="unity-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
    </div>
  </div>`,e.parentNode.appendChild(e),e=e},_addEleEvent(){document.querySelector("#unity-container");var e=document.querySelector("#unity-canvas"),n=document.querySelector("#unity-loading-bar");document.querySelector("#unity-progress-bar-full"),document.querySelector("#unity-fullscreen-button");var t=document.querySelector("#unity-warning");function o(u,d){function y(){t.style.display=t.children.length?"block":"none"}var f=document.createElement("div");f.innerHTML=u,t.appendChild(f),d=="error"?f.style="background: red; padding: 10px;":(d=="warning"&&(f.style="background: yellow; padding: 10px;"),setTimeout(function(){t.removeChild(f),y()},5e3)),y()}var l="./incter/api/model_unity/unity/Build/UnityMain.loader.js",a={dataUrl:"./incter/api/model_unity/unity/Build/UnityMain.data",frameworkUrl:"./incter/api/model_unity/unity/Build/UnityMain.framework.js",codeUrl:"./incter/api/model_unity/unity/Build/UnityMain.wasm",streamingAssetsUrl:"StreamingAssets",companyName:"DefaultCompany",productName:"BIMEngine",productVersion:"0.1.0",showBanner:o,cacheControl:function(u){}};if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){var s=document.createElement("meta");s.name="viewport",s.content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes",document.getElementsByTagName("head")[0].appendChild(s),e.className="unity-mobile"}else e.style.width="100%",e.style.height="100%";n.style.display="block";var r=document.createElement("script");r.src=l,r.onload=()=>{var u=document.querySelector("#unity-canvas");createUnityInstance(u,a,this.UnityLoading).then(d=>{window.unitygameinstance=d,n.style.display="none"}).catch(d=>{alert(d)})},document.body.appendChild(r)},unityloadpro:null,UnityLoading(e){c.unityloadpro=e,console.log("",c.unityloadpro)},_init(){this._createElement(),this._addEleEvent()},_quitUnity(){window.unitygameinstance.Quit(function(){console.log("quit done!")}),window.unitygameinstance=null;var e=document.querySelector("#unity-canvas");e.remove(),e=null,this._createElement(),this._addEleEvent()},InitQueue:{isBusy:!1,queue:[],activeQueue:[],maxActive:1},modelInfoDict:new Map,notiTexture:null,notiUnityByCache:null,notiUnityByFlow:null,_onUnmountedunity(){window.unitygameinstance.Quit(function(){console.log("quit done!")}),window.unitygameinstance=null;var e=document.querySelector("#unity-canvas");e.remove(),e=null,this.InitQueue={isBusy:!1,queue:[],activeQueue:[],maxActive:1},this.modelInfoDict=new Map,window.clearInterval(this.notiTexture),window.clearInterval(this.notiUnityByCache),window.clearInterval(this.notiUnityByFlow)},_AddTags(e,n){window.unitygameinstance.Module.DynCallCSFunc("AddTags","vii",["string",typeof n],[e,n])},_RemoveTag(e){window.unitygameinstance.Module.DynCallCSFunc("RemoveTag","vi",[typeof e],[e])},_RemoveAllTags(){window.unitygameinstance.Module.DynCallCSFunc("RemoveAllTags","v",[],[])},_UpdateTags(e,n){window.unitygameinstance.Module.DynCallCSFunc("UpdateTags","vii",[typeof e,typeof n],[e,n])},_SetTextAlignment(e){window.unitygameinstance.Module.DynCallCSFunc("UIAutoFit","vi",[typeof e],[e])},_SetTextFont(e){window.unitygameinstance.Module.DynCallCSFunc("SetTextFont","vi",[typeof e],[e])},_SetTextColor(e,n,t,o){window.unitygameinstance.Module.DynCallCSFunc("SetTextColor","viiii",[typeof e,typeof n,typeof t,typeof o],[e,n,t,o])},_SetTextSize(e){window.unitygameinstance.Module.DynCallCSFunc("SetTextSize","vf",[typeof e],[e])},_SetRouteWidth(e){window.unitygameinstance.Module.DynCallCSFunc("SetRouteWidth","vf",[typeof e],[e])},_SetRouteColor(e,n,t,o){window.unitygameinstance.Module.DynCallCSFunc("SetRouteColor","viiii",[typeof e,typeof n,typeof t,typeof o],[e,n,t,o])},_SetSelectionInnerColor(e,n,t,o){window.unitygameinstance.Module.DynCallCSFunc("SetSelectionInnerColor","viiii",[typeof e,typeof n,typeof t,typeof o],[e,n,t,o])},_SetRouteMaterial(e){window.unitygameinstance.Module.DynCallCSFunc("SetRouteMaterial","vi",[typeof e],[e])},_SetRouteVisible(e){window.unitygameinstance.Module.DynCallCSFunc("SetRouteVisible","vi",[typeof e],[e])},_SetRoamSpeed(e){window.unitygameinstance.Module.DynCallCSFunc("SetRoamSpeed","vf",[typeof e],[e])},_PauseRoam(e){window.unitygameinstance.Module.DynCallCSFunc("PauseRoam","vi",[typeof e],[e])},_EndRoam(){window.unitygameinstance.Module.DynCallCSFunc("EndRoam","v",[],[])},_ChangeRoamPoint(e){window.unitygameinstance.Module.DynCallCSFunc("ChangeRoamPoint","vi",[typeof e],[e])},_RoamArriveEvent(e){window.unitygameinstance.Module.DynCallCSFunc("RoamArriveEvent","vi",[typeof e],[e])},_StartRoam(e){window.unitygameinstance.Module.DynCallCSFunc("StartRoam","vi",[typeof e],[e])},_SetPropertyById(e,n,t){window.unitygameinstance.Module.DynCallCSFunc("SetPropertyById","iiii",[typeof e,typeof n,typeof t],[e,n,t])},_GetObjectByName(e){return window.unitygameinstance.Module.DynCallCSFunc("GetObjectByName","ii",[typeof e],[e])},_GetObjectByLayer(e){return window.unitygameinstance.Module.DynCallCSFunc("GetObjectByLayer","ii",[typeof e],[e])},_GetObjectByType(e){let n=window.unitygameinstance.Module.DynCallCSFunc("GetObjectByType","ii",[typeof e],[e]);return new Array(JSON.parse(JSON.stringify(n)))},_GetObjectChilds(e){let n=window.unitygameinstance.Module.DynCallCSFunc("GetObjectChilds","ii",[typeof e],[e]);return JSON.parse(JSON.stringify(n))},_AddObject(e,n,t,o,l){if(e&&n&&t&&o&&l)alert("参数确少");else{var a={x:t.x,y:t.y,z:t.z},s={x:o.x,y:o.y,z:o.z},r={x:l.x,y:l.y,z:l.z},u={type:e,Id:n,position:a,eulerAngle:s,localScale:r};window.unitygameinstance.Module.DynCallCSFunc("AddObject","vi",[typeof u],[JSON.stringify(u)])}},_CloneObject(e,n,t){let o=window.unitygameinstance.Module.DynCallCSFunc("CloneObject","iiii",[typeof e,typeof n,typeof t],[e,n,t]);return Number(o)},_DoMove(e,n,t){var o={x:n.x,y:n.y,z:n.z};window.unitygameinstance.Module.DynCallCSFunc("DoMove","iiif",[typeof e,typeof JSON.stringify(o),typeof t],[e,JSON.stringify(o),t])},_DoLocalMove(e,n,t){var o={x:n.x,y:n.y,z:n.z};window.unitygameinstance.Module.DynCallCSFunc("DoLocalMove","iiif",[typeof e,typeof JSON.stringify(o),typeof t],[e,JSON.stringify(o),t])},_DoRotate(e,n,t){var o={x:n.x,y:n.y,z:n.z};window.unitygameinstance.Module.DynCallCSFunc("DoRotate","iiif",[typeof e,typeof JSON.stringify(o),typeof t],[e,JSON.stringify(o),t])},_DoLocalRotate(e,n,t){var o={x:n.x,y:n.y,z:n.z};window.unitygameinstance.Module.DynCallCSFunc("DoLocalRotate","iiif",[typeof e,typeof JSON.stringify(o),typeof t],[e,JSON.stringify(o),t])},_DoLocalScale(e,n,t){var o={x:n.x,y:n.y,z:n.z};window.unitygameinstance.Module.DynCallCSFunc("DoLocalScale","iiif",[typeof e,typeof JSON.stringify(o),typeof t],[e,JSON.stringify(o),t])},_GetMainCameraId(){let e=window.unitygameinstance.Module.DynCallCSFunc("GetMainCameraId","i",[],[]);return JSON.parse(JSON.stringify(e))},_GetCullingMask(e){let n=window.unitygameinstance.Module.DynCallCSFunc("GetCullingMask","ii",[typeof e],[e]);return JSON.parse(JSON.stringify(n))},_SetCullingMask(e,n){window.unitygameinstance.Module.DynCallCSFunc("SetCullingMask","iii",[typeof e,typeof JSON.stringify(n)],[e,JSON.stringify(n)])},_AddCullingMask(e,n){window.unitygameinstance.Module.DynCallCSFunc("AddCullingMask","iii",[typeof e,typeof n],[e,n])},_RemoveCullingMask(e,n){window.unitygameinstance.Module.DynCallCSFunc("RemoveCullingMask","iii",[typeof e,typeof n],[e,n])},_FocusObject(e,n){window.unitygameinstance.Module.DynCallCSFunc("FocusObject","iii",[typeof e,typeof n],[e,n])},_FocusObjectOffset(e,n,t,o){let l={x:t.x,y:t.y,z:t.z},a=null;o!=null&&(a={x:o.x,y:o.y,z:o.z}),window.unitygameinstance.Module.DynCallCSFunc("FocusObjectOffset","iiiii",[typeof e,typeof n,typeof l,typeof a],[e,n,l,a])},_AddInputTextUI(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("AddInputTextUI","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_AddLineUI(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("AddLineUI","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_AddBoxUI(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("AddBoxUI","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_AddAnnulusUI(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("AddAnnulusUI","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_AddArrowUI(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("AddArrowUI","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_EnableCreate3DUI(e){try{window.unitygameinstance.Module.DynCallCSFunc("EnableCreate3DUI","vi",[typeof e],[e])}catch(n){console.log(n)}},_EnableKeyboard(e){try{window.unitygameinstance.Module.DynCallCSFunc("EnableKeyboard","vi",[typeof e],[e])}catch(n){console.log(n)}},_EnableMultiLineTool(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("EnableMultiLineTool","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_EnableAngleTool(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("EnableAngleTool","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_EnableVolumeTool(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("EnableVolumeTool","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_EnableMinDistanceTool(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("EnableMinDistanceTool","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_EnableAreaTool(e,n,t){try{window.unitygameinstance.Module.DynCallCSFunc("EnableAreaTool","viii",[typeof e,typeof n,typeof t],[e,n,t])}catch(o){console.log(o)}},_EnableLengthTool(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("EnableLengthTool","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_SetLightData(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetLightData","vi",[typeof e],[e])}catch(n){console.log(n)}},_SetSkybox(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetSkybox","vi",[typeof e],[e])}catch(n){console.log(n)}},_SetVolumeData(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetVolumeData","vi",[typeof e],[e])}catch(n){console.log(n)}},_EnableAnimationRecord(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("EnableAnimationRecord","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_PlayAnimation(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("PlayAnimation","vii",[typeof e,typeof n],[e,callback])}catch(t){console.log(t)}},_SetAnimationFrame(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetAnimationFrame","vi",[typeof e],[e])}catch(n){console.log(n)}},_RemoveAllAnnotations(){try{window.unitygameinstance.Module.DynCallCSFunc("RemoveAllAnnotations","v",[],[])}catch(e){console.log(e)}},_AddLight(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("AddLight","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_RemoveAllLights(){try{window.unitygameinstance.Module.DynCallCSFunc("RemoveAllLights","v",[],[])}catch(e){console.log(e)}},_SetEnvironmentLight(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetEnvironmentLight","vi",[typeof e],[e])}catch(n){console.log(n)}},_EnableSceneEdit(e){try{window.unitygameinstance.Module.DynCallCSFunc("EnableSceneEdit","vi",[typeof e],[e])}catch(n){console.log(n)}},_ImportSceneTempData(){try{window.unitygameinstance.Module.DynCallCSFunc("ImportSceneTempData","v",[],[])}catch(e){console.log(e)}},_CompleteAllAnnotations(){try{window.unitygameinstance.Module.DynCallCSFunc("CompleteAllAnnotations","v",[],[])}catch(e){console.log(e)}},_RemoveAllMeasureTools(){try{window.unitygameinstance.Module.DynCallCSFunc("RemoveAllMeasureTools","v",[],[])}catch(e){console.log(e)}},_HideAllMeasureTools(e){try{window.unitygameinstance.Module.DynCallCSFunc("HideAllMeasureTools","vi",[typeof e],[e])}catch(n){console.log(n)}},_SetLODsScreenRelativeTransitionHeight(e){try{window.unitygameinstance.Module.DynCallCSFunc("SetLODsScreenRelativeTransitionHeight","vf",[typeof e],[e])}catch(n){console.log(n)}},_AllToTransById(e,n){window.unitygameinstance.Module.DynCallCSFunc("AllToTransById","vif",[typeof e,typeof n],[e,n])},_AllToPbrById(e){window.unitygameinstance.Module.DynCallCSFunc("AllToPbrById","vi",[typeof e],[e])},_ToTransById(e,n,t){window.unitygameinstance.Module.DynCallCSFunc("ToTransById","vfff",[typeof e,typeof n,typeof t],[e,n,t])},_ToPbrById(e,n){window.unitygameinstance.Module.DynCallCSFunc("ToPbrById","vif",[typeof e,typeof n],[e,n])},_LookAtPos(e){window.unitygameinstance.Module.DynCallCSFunc("LookAtPos","vi",[typeof e],[e])},_ZoomIn(){window.unitygameinstance.Module.DynCallCSFunc("ZoomIn","v",[],[])},_ZoomOut(){window.unitygameinstance.Module.DynCallCSFunc("ZoomOut","v",[],[])},_ToPerspective(e){window.unitygameinstance.Module.DynCallCSFunc("ToPerspective","vi",[typeof e],[e])},_ToOrthographic(e){window.unitygameinstance.Module.DynCallCSFunc("ToOrthographic","vi",[typeof e],[e])},_FrontView(e){window.unitygameinstance.Module.DynCallCSFunc("FrontView","vi",[typeof e],[e])},_BackView(e){window.unitygameinstance.Module.DynCallCSFunc("BackView","vi",[typeof e],[e])},_LeftView(e){window.unitygameinstance.Module.DynCallCSFunc("LeftView","vi",[typeof e],[e])},_RightView(e){window.unitygameinstance.Module.DynCallCSFunc("RightView","vi",[typeof e],[e])},_TopView(e){window.unitygameinstance.Module.DynCallCSFunc("TopView","vi",[typeof e],[e])},_BottomView(e){window.unitygameinstance.Module.DynCallCSFunc("BottomView","vi",[typeof e],[e])},_EnableObservation(e){try{window.unitygameinstance.Module.DynCallCSFunc("EnableObservation","vi",[typeof e],[e])}catch(n){console.log(n)}},_ChangeMaterialInfo(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("ChangeMaterialInfo","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},_StartCrossById(e){try{window.unitygameinstance.Module.DynCallCSFunc("StartCrossById","vi",[typeof e],[e])}catch(n){console.log(n)}},_StartCrossByModelRoot(){try{window.unitygameinstance.Module.DynCallCSFunc("StartCrossByModelRoot","v",[],[])}catch(e){console.log(e)}},_RestoreCross(){try{window.unitygameinstance.Module.DynCallCSFunc("RestoreCross","v",[],[])}catch(e){console.log(e)}},_ReCalculateBounds(){try{window.unitygameinstance.Module.DynCallCSFunc("ReCalculateBounds","v",[],[])}catch(e){console.log(e)}},_LoadGlbAsync(e,n,t,o,l){window.unitygameinstance.Module.DynCallCSFunc("LoadGlbAsyncCS","viiiii",[typeof e,typeof n,typeof t,typeof o,typeof l],[e,n,t,o,l])},_GameObjSetActive(e,n,t){window.unitygameinstance.Module.DynCallCSFunc("GameObjectSetActiveCS","viii",[typeof e,typeof n,typeof t],[e,n,t])},list:null,_Downloade(e){this.downLoadab(e),this.downLoadab2(e)},async downLoadab(e){this._TestDB(e)},async downLoadab2(e){this._TestDB(e)},GetIndexedDBURL(e,n){var t=this.GetValue,o=e.toUpperCase();let l=[];return new Promise((a,s)=>{var r=window.indexedDB,u=r.open(e,1);u.onerror=function(d){console.log("IndexedDB error: "+d.target.errorCode),s("error")},u.onsuccess=async function(d){var y=u.result,f=y.transaction([o],"readwrite");if(Array.isArray(n)==!0)n.forEach(async(g,m)=>{let b=await t(f,o,g);var p=window.URL||window.webkitURL,D=p.createObjectURL(new Blob([b]));l.push({name:g,bloburl:D}),m==n.length-1&&a(l)});else{let g=await t(f,o,n);var w=window.URL||window.webkitURL,C=w.createObjectURL(new Blob([g]));l.push({name:n,bloburl:C}),a(l)}}})},GetValue(e,n,t){if(t==null||t==null||t=="")resolve(null);else return console.log(t),new Promise((o,l)=>{let s=e.objectStore(n).get(t);s.onerror=function(r){console.log("事务失败"),l(r)},s.onsuccess=function(r){o(s.result)}})},DownloadResource(e){try{return new Promise((n,t)=>{const o=new XMLHttpRequest;o.timeout=6e4,o.open("GET",e),o.responseType="blob",o.onload=()=>{if(o.status===200){var l=new Uint8Array(o.response);let a=new FileReader;a.readAsDataURL(o.response),a.onload=function(s){S=a.result.split(",")[1];const r=atob(S);var u=new Uint8Array(r.length);for(let d=0;d<r.length;d++)u[d]=r.charCodeAt(d);n(u)}}else n(null),t(o.statusText)},o.ontimeout=()=>{t("timeout")},o.onerror=()=>{console.log("eeeeeeeeeeeeeeeee"),t("error")},o.send(()=>{console.log("send error")})})}catch(n){console.log(n+"DownloadResource")}},CheckDatabaseExists(e){return new Promise(function(n,t){var o=window.indexedDB;o.databases().then(l=>{e.forEach(a=>{typeof l.find(s=>s.name===a.dbName)>"u"?(a.isExist=!1,a.keys.forEach(s=>{s.isDownloaded=!1}),console.log(a)):a.isExist=!0,console.log("checkdatabase",a)}),n(e)})})},CheckIndexedDBValue(e){var n=e.dbName,t=e.dbName.toUpperCase();return new Promise((o,l)=>{if(e.isExist==!0){var a=window.indexedDB,s=a.open(n,1);s.onerror=function(r){console.log("IndexedDB error: "+r.target.errorCode),l("error")},s.onsuccess=async function(r){var u=s.result,d=u.transaction([t],"readonly");await e.keys.forEach(y=>{d.objectStore(t).get(y.name).onsuccess=function(f){typeof f.target.result=="object"?y.isDownloaded=!0:y.isDownloaded=!1}}),d.oncomplete=function(){console.log("check database value",e.keys),o(e.keys)}}}else console.log("check database value",e.keys),o(e.keys)})},Download(e,n){e.forEach(async(t,o)=>{await window.unitygameinstance.Module.DynCallCSFunc("AddurlDic_H5","vii",[typeof t.name,typeof t.bloburl],[t.name,t.bloburl]),o==e.length-1&&(console.log("AddurlDic_H5 Done"),this.getTem(n))})},_getModelurl(e){return new Promise(function(n,t){var o=null;window.XMLHttpRequest?o=new XMLHttpRequest:window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLHTTP")),o.open("get",e),o.onreadystatechange=function(){o.readyState==4&&o.status==200&&(callback(o.responseText),this._InitModel(o.responseText))},n(o.responseText)})},dbInfos:[],obj:null,callbacks:[],async InitSingleModel(e,n){this.dbInfos=[],this.obj=null,c.loadcallback=n,this.obj=JSON.parse(e);var t=this.obj.fileInfo.id;if(this.modelInfoDict.get(t)==null?this.modelInfoDict.set(t,{AccessCount:1,LastAccessTime:new Date,isInstantiating:!1,heapSizeEstimate:this.obj.fileInfo.size/1024/1024*8,uuidDict:new Map}):(this.modelInfoDict.get(t).AccessCount++,this.modelInfoDict.get(t).LastAccessTime=new Date),this.modelInfoDict.forEach((r,u)=>{console.log(u,r),u!=t&&r.isInstantiated==!0&&r.uuidDict.forEach(d=>{d.instanceID.forEach(y=>{this._SetPropertyById(Number(y),"visible","false")})})}),this.modelInfoDict.get(t).isInstantiated==!0)console.log(this.modelInfoDict.get(t).uuidDict),this.modelInfoDict.get(t).uuidDict.forEach(r=>{r.instanceID.forEach(u=>{this._SetPropertyById(Number(u),"visible","true")})}),console.log("InitQueue",this.InitQueue),this.InitQueue.activeQueue.shift(),console.log("SetActive True");else{var o=setInterval(()=>{console.log("loading"),window.unitygameinstance!=null&&(console.log("loaded"),clearInterval(o))},1e3),l;if(window.unitygameinstance==null?l=4096:l=window.performance.memory.jsHeapSizeLimit/1024/1024-window.unitygameinstance.GetMemoryInfo().totalWASMHeapSize/1024/1024,console.log("availableHeapSize",l),this.modelInfoDict.get(t).heapSizeEstimate<l)console.log("New Add File"),this.Download();else{console.log("New Add File By Destroy");var a=[];modelInfoDict.forEach((r,u)=>{a.push({id:u,AccessCount:r.AccessCount,LastAccessTime:r.LastAccessTime,Size:r.heapSizeEstimate})}),a=sortByAccessAndTime(a);var s=0;a.forEach(r=>{s<this.obj.fileInfo.size&&(s+=r.Size,modelInfoDict.get(r.id).isNeedDestroy=!0)}),modelInfoDict.forEach(r=>{r.isNeedDestroy==!0&&r.modelDict.forEach(u=>{u.isInstantiated==!0&&u.instanceID.forEach(d=>{this._DestroyObject(d)})})}),this.Download()}}},CheckDataBase(e,n){return new Promise(function(t,o){var l=window.indexedDB,l=window.indexedDB;l.databases().then(a=>{a.find(s=>s.name==e)!=null?t(!0):t(!1)})})},CheckDataBaseValueList(e,n,t){return new Promise((o,l)=>{var a=window.indexedDB,s=a.open(n,1);s.onerror=function(r){l("error")},s.onsuccess=async function(r){var u=s.result,d=u.transaction([t],"readonly");await e.forEach(y=>{d.objectStore(t).get(y.modelID).onsuccess=function(f){if(typeof f.target.result=="object"&&f.target.result!=null){y.isDownloaded=!0;var w=window.URL||window.webkitURL,C=w.createObjectURL(new Blob([f.target.result]));y.blobUrl=C}else y.isDownloaded=!1;f.target.result==null&&(y.isDownloaded=!1)}}),d.oncomplete=function(){o("success")}},s.onupgradeneeded=function(r){r.target.result.createObjectStore(TableName,{}),console.log("onupgradeneeded")}})},CheckDataBaseValueTexture(e){var n="texture",t="TEXTURE";return new Promise((o,l)=>{var a=window.indexedDB,s=a.open(n,1);s.onerror=function(r){l("error")},s.onsuccess=async function(r){var u=s.result,d=u.transaction([t],"readonly");d.objectStore(t).get(e.key).onsuccess=function(y){if(typeof y.target.result=="object"&&y.target.result!=null){e.isDownloaded=!0;var f=window.URL||window.webkitURL,w=f.createObjectURL(new Blob([y.target.result]));e.blobUrl=w,y.target.result==null?e.isNull=!0:e.isNull=!1}else e.isDownloaded=!1},d.oncomplete=function(){o("success")}},s.onupgradeneeded=function(r){r.target.result.createObjectStore(t,{}),console.log("onupgradeneeded")}})},async startDownload(e,n){c.loadcallback=n;const t=JSON.parse(e),o=t.models,l=t.fileInfo,a=t.texturezip,s=1e3;this.notiSheets.set(l.id,{fileCount:o.length,notiCount:0,notiFileCount:0,downloadCount:0,notiFiles:[]});const r={id:l.id,notiSheetsContext:this.notiSheets,view:t.view};var u=!1;a.key=l.id+a.name;var d=await this.CheckDataBase("texture","TEXTURE");if(d?(await this.CheckDataBaseValueTexture(a),a.isDownloaded==!1&&(u=!0)):u=!0,console.log("LoadPictureCheck:",a),u){const w=await this.downloadFile(a.url);w!=null?a.isNull=!1:a.isNull=!0,a.blobUrl=await this.SetAndGetIndexedDB("texture","TEXTURE",a.key,w,!1),a.isNull||(this.notiTexture=setInterval(()=>{var C;((C=window.unitygameinstance)==null?void 0:C.Module.LoadTextureZipCS)!=null&&(clearInterval(this.notiTexture),console.log("loaded texture",a),this.LoadPictureU3D(a.blobUrl))},100))}else a.isNull||(this.notiTexture=setInterval(()=>{var w;((w=window.unitygameinstance)==null?void 0:w.Module.LoadTextureZipCS)!=null&&(console.log("loaded texture",a),clearInterval(this.notiTexture),this.LoadPictureU3D(a.blobUrl))},100));var y=!1,f=await this.CheckDataBase(l.id);f?(await this.CheckDataBaseValueList(t.models,l.id,"DATA"),t.models.find(w=>w.isDownloaded==!1)!=null&&(y=!0)):y=!0,console.log("CACHE CHECK",t),y?(console.log("Flow Type"),this.NotiUnity(r),this.downloadFilesConcurrently(o,s,r).then(()=>{console.log("All files have been downloaded.")}).catch(w=>{console.error("Error during downloads:",w)})):(console.log("Cache Type",t),this.notiUnityByCache=setInterval(()=>{var w,C,g,m;if(((w=window.unitygameinstance)==null?void 0:w.Module.LoadMessage)==null||((C=window.unitygameinstance)==null?void 0:C.Module.ChangeLoadCount)==null){console.log("Waiting for Unity",(g=window.unitygameinstance)==null?void 0:g.Module.LoadMessage,(m=window.unitygameinstance)==null?void 0:m.Module.ChangeLoadCount);return}clearInterval(this.notiUnityByCache),this.ChangeLoadCount(),this.LoadALLModels(JSON.stringify(t))},1e3))},notiSheets:new Map,async downloadFilesConcurrently(e,n,t){let o=0,l=0,a=[];var s=this.downloadFile,r=this.SetAndGetIndexedDB,u=this.notifyUser;async function d(){if(o>=e.length)return;const f=o++,w=e[f],C=e[f].url;try{const g=await s(C),m=await r(t.id,"DATA",w.modelID,g,!1);w.blobUrl=m,a.push(w),l++,l%100===0&&(u(`Downloaded ${l} files`,a,t),a=[])}catch(g){console.error(`Error downloading ${C}:`,g)}await d()}const y=Array(Math.min(n,e.length)).fill(null).map(d);await Promise.all(y),a.length>0&&this.notifyUser(`Downloaded ${l} files`,a,t)},NotiUnity(e){var n=e.notiSheetsContext.get(e.id),t=void 0;this.notiUnityByFlow=setInterval(()=>{var a,s,r,u;if(((a=window.unitygameinstance)==null?void 0:a.Module.AddLoadQueue)==null||((s=window.unitygameinstance)==null?void 0:s.Module.InitCamPos)==null){console.log("Waiting for Unity",(r=window.unitygameinstance)==null?void 0:r.Module.AddLoadQueue,(u=window.unitygameinstance)==null?void 0:u.Module.InitCamPos);return}if(console.log("NotiUnity ing"),t=n.notiFiles.find(d=>d.isNoti==!1),t!=null){t.isNoti=!0,n.notiCount++,n.notiFileCount+=t.files.length,console.log("notiSheet:",n);var o=n.notiCount===1&&n.notiFileCount!==n.fileCount?0:n.notiCount>1&&n.notiFileCount!==n.fileCount?1:n.notiCount===1&&n.notiFileCount===n.fileCount?3:n.notiFileCount===n.fileCount?2:void 0,l={models:t.files,status:o,maxcount:t.files.length};console.log("Send Unity",n.notiCount,n.notiFileCount,l),(o==0||o==2||o==3)&&(console.log("InitCamPos",typeof e.view),this.InitCamPos(JSON.stringify(e.view))),this.AddLoadQueue(JSON.stringify(l))}n.notiFileCount==n.fileCount&&(clearInterval(this.notiUnityByFlow),console.log("NotiUnity end"))},1e3)},notifyUser(e,n,t){var o=t.notiSheetsContext.get(t.id);o.notiFiles.push({isNoti:!1,files:n}),o.downloadCount+=n.length,console.log("notiSheets",o)},downloadFile(e){try{return new Promise((n,t)=>{const o=new XMLHttpRequest;o.timeout=6e4,o.open("GET",e),o.responseType="blob",o.onload=()=>{if(o.status===200){var l=new Uint8Array(o.response);let a=new FileReader;a.readAsDataURL(o.response),a.onload=function(s){S=a.result.split(",")[1];const r=atob(S);var u=new Uint8Array(r.length);for(let d=0;d<r.length;d++)u[d]=r.charCodeAt(d);n(u)}}else n(null),t(o.statusText)},o.ontimeout=()=>{t("timeout")},o.onerror=()=>{t("error")},o.send(()=>{console.log("send error")})})}catch(n){console.log(n+"DownloadResource")}},sortByAccessAndTime(e){return e.sort((n,t)=>{const o=n.AccessCount-t.AccessCount;return o===0?n.LastAccessTime.getTime()-t.LastAccessTime.getTime():o})},async Download(){var e=[];this.obj.models.forEach(t=>{e.push({name:t.modelID,url:t.url})}),this.dbInfos.push({dbName:"data",isExist:{},isAllDone:!0,keys:e}),this.dbInfos.push({dbName:"texture",isExist:{},keys:[this.obj.texturezip]}),await this.CheckDatabaseExists(this.dbInfos),console.log(this.dbInfos);let n=this.dbInfos.map(async t=>{await this.CheckIndexedDBValue(t)});await Promise.all(n),console.log(this.dbInfos),this.dbInfos[0].keys.find(t=>t.isDownloaded==!1)||this.dbInfos[1].keys.find(t=>t.isDownloaded==!1)?this.dbInfos.map(t=>{t.keys.map(o=>{o.isDownloaded==!1&&this.enqueue({url:o.url,dbName:t.dbName,name:o.name})})}):this.AfterDownResource()},_InitModel(e,n,t){t==null&&this.startDownload(e,n)},EnqueueInit(e){this.InitQueue.queue.push(e),console.log("Push task"),this.StartNextInit()},StartNextInit(){for(console.log("InitQueue.queue.length",this.InitQueue.queue.length),console.log("this.InitQueue.activeQueue.length",this.InitQueue.activeQueue.length);this.InitQueue.queue.length>0&&this.InitQueue.activeQueue.length<this.InitQueue.maxActive;){const e=this.InitQueue.queue.shift();this.InitTask(e)}},InitTask(e){this.InitQueue.activeQueue.push(e),this.InitSingleModel(e.jsonStr,e.cb)},DownloadQueue:{queue:[],activeDownloads:[],maxConcurrentDownloads:1300},enqueue(e){this.DownloadQueue.queue.push(e),this.StartNextDownloads(e)},async StartNextDownloads(e){for(;this.DownloadQueue.queue.length>0&&this.DownloadQueue.activeDownloads.length<this.DownloadQueue.maxConcurrentDownloads;){const n=this.DownloadQueue.queue.shift();await this.DownloadTask(n)}},async DownloadTask(e){this.DownloadQueue.activeDownloads.push(e);try{await this.DownloadResource(e.url).then(async n=>{await this.SetIndexedDB(e.dbName,e.name,n)})}finally{this.DownloadQueue.activeDownloads.shift(e),this.StartNextDownloads(),this.DownloadQueue.activeDownloads.length==0&&(console.log("All Done"),this.AfterDownResource())}},async AfterDownResource(){var e=this.dbInfos.map(async l=>{await this.GetIndexedDBBlobUrls(l.dbName,l.keys)});await Promise.all(e),console.log("url done",this.dbInfos);var n=this.dbInfos.find(l=>l.dbName==="texture");console.log(n);var t=this.dbInfos.find(l=>l.dbName==="data");e=t.keys.map(async l=>{await delete l.url}),await Promise.all(e),console.log(t),e=this.obj.models.map(l=>{delete l.url}),console.log("obj",this.obj);var o=setInterval(()=>{console.log("module1.unityloadpro 0",c.unityloadpro),c.unityloadpro&&(console.log("module1.unityloadpro 1",c.unityloadpro),clearInterval(o),console.log("start call unity api "),this.LoadCallBack(n.keys[0].bloburl,JSON.stringify(t.keys),JSON.stringify(this.obj)),this.obj=null,this.dbInfos=null)},1e3)},LoadCallBack(e,n,t){var o=setInterval(()=>{if(typeof window.unitygameinstance.Module.BlobMessage>"u")console.log("加载中");else{clearInterval(o),this.LoadBIMBegin(e,n,t);return}},100)},LoadBIMBegin(e,n,t){console.log("dbtexture",e),console.log("dbobj",n),console.log("json",t),e&&this.LoadTextureZip(e,this.Msg),this.AddBlob2U3D(n,this.BlobCallBack),this.AddModelMsg2U3D(t,this.ModelMsgCallBack)},AddModelMsg2U3D(e,n){window.unitygameinstance.Module.DynCallCSFunc("LoadMessage","vii",[typeof e,typeof n],[e,n])},ModelMsgCallBack(e){console.log("LoadMessage:"+e),e.indexOf("已成功添加模型信息")>=0&&(window.unitygameinstance.Module.DynCallCSFunc("ChangeLoadCount","ii",["number"],[500]),window.unitygameinstance.Module.DynCallCSFunc("BeginLoad","vii",[typeof c.loadcallback,typeof c.OnLoadAdapter],[c.loadcallback,c.OnLoadAdapter]))},OnLoadAdapter(e,n){var t=c.InitQueue.activeQueue.shift();c.modelInfoDict.get(t.id).isInstantiated=!0;var o,l;JSON.parse(t.jsonStr).models.map(a=>{o=a.modelID.replace(".ab",""),l=c._UUID2ID(o),l==null?console.log("id.obj is undefined",o):(c.modelInfoDict.get(t.id).uuidDict.set(o,{instanceID:[JSON.parse(l).id]}),a.copies.map(s=>{l=c._UUID2ID(s.modelID),l==null?console.log("id.obj is undefined",s.modelID):c.modelInfoDict.get(t.id).uuidDict.get(o).instanceID.push(JSON.parse(l).id)}))})},OnLoadAdapterSleep(e,n){},AddBlob2U3D(e,n){window.unitygameinstance.Module.DynCallCSFunc("BlobMessage","vii",[typeof e,typeof n],[e,n])},BlobCallBack(e){console.log("BlobMessage:"+e)},Msg(e){console.log("LoadTextureZip:"+e)},getTem(e){var n=e.models;for(let t=0;t<n.length;t++){this.temdic(n[t].modelID,n[t].modelID);let o=JSON.stringify(n[t].materials);this.matdic(n[t].modelID,o);for(let l=0;l<n[t].copies.length;l++){this.temdic(n[t].copies[l].modelID+".ab",n[t].modelID);let a=JSON.stringify({x:n[t].copies[l].x,y:n[t].copies[l].y,z:n[t].copies[l].z});this.posdic(n[t].copies[l].modelID+".ab",a)}}console.log("添加完成"),this.loadtestin(e.view)},temdic(e,n){let t=e,o=n;window.unitygameinstance.Module.DynCallCSFunc("UUid2TemId","vii",[typeof t,typeof o],[t,o])},posdic(e,n){let t=e,o=n;window.unitygameinstance.Module.DynCallCSFunc("AddPosDic","vii",[typeof t,typeof o],[t,o])},matdic(e,n){let t=e,o=n;window.unitygameinstance.Module.DynCallCSFunc("AddMatDic","vii",[typeof t,typeof o],[t,o])},LoadPicture(e,n){let t=e,o=n;window.unitygameinstance.Module.DynCallCSFunc("LoadPicture","vii",[typeof t,typeof o],[t,o])},LoadTextureZip(e,n){try{window.unitygameinstance.Module.DynCallCSFunc("LoadTextureZipCS","vii",[typeof e,typeof n],[e,n])}catch(t){console.log(t)}},loadtestin(e,n){console.log(e,"loadtestin");var t=Object.entries(e);c.data=t[0],this.downloadall(c.data).then(o=>{console.log(o),this.loadtestout(e)})},loadtestout(e,n){console.log(e,"loadtestout");var t=Object.entries(e);c.data=t[1],this.downloadall(c.data).then(o=>{console.log(o);try{this.beginLoad()}catch(l){console.log(l)}})},downloadall(e,n){return new Promise((t,o)=>{var l=Object.entries(e[1]);window.unitygameinstance.Module.DynCallCSFunc("ChangeLoadCount","ii",["number"],[500]),window.unitygameinstance.Module.DynCallCSFunc("ChangeDrawCount","ii",["number"],[1]),l.length;for(let a=0;a<l.length;a++){for(let s=0;s<l[a][1].out.length;s++){let r=l[a][1].out[s]+".ab";window.unitygameinstance.Module.DynCallCSFunc("GetLoadList","ii",[typeof r],[r])}for(let s=0;s<l[a][1].in.length;s++){let r=l[a][1].in[s]+".ab";window.unitygameinstance.Module.DynCallCSFunc("GetLoadList","ii",[typeof r],[r])}}t("scuss!!!")})},beginLoad(){window.unitygameinstance.Module.DynCallCSFunc("BeginLoad","vi",[typeof this.loadcallback],[this.loadcallback])},_AllToTransById(e,n){window.unitygameinstance.Module.DynCallCSFunc("AllToTransById","vif",[typeof e,typeof n],[e,n])},_AllToPbrById(e){window.unitygameinstance.Module.DynCallCSFunc("AllToPbrById","vi",[typeof e],[e])},_ToTransById(e,n,t){window.unitygameinstance.Module.DynCallCSFunc("ToTransById","vfff",[typeof e,typeof n,typeof t],[e,n,t])},_ToPbrById(e,n){window.unitygameinstance.Module.DynCallCSFunc("ToPbrById","vif",[typeof e,typeof n],[e,n])},GetUrl_H5(e){var n=c.urldic[e];return typeof n>"u"&&(n="Error"),n},GetIndexedDBBlobUrls(e,n){var t=e.toUpperCase(),o=this.GetValue;return new Promise((l,a)=>{var s=window.indexedDB,r=s.open(e,1);r.onerror=function(u){a("error")},r.onsuccess=async function(u){var d=r.result,y=d.transaction([t],"readwrite");n.forEach(async(f,w)=>{let C=await o(y,t,f.name);var g=window.URL||window.webkitURL;f.bloburl=g.createObjectURL(new Blob([C])),w==n.length-1&&l(n)})}})},async SetAndGetIndexedDB(e,n,t,o,l){if(console.log("SetAndGetIndexedDB",e,t,typeof o),t==null||t==null||t=="")resolve("success");else return new Promise((a,s)=>{var r=e,u=n,d=window.indexedDB,y=d.open(r,1);y.onerror=function(f){s("error")},y.onsuccess=function(f){var C=f.target.result.transaction(u,"readwrite"),g=C.objectStore(u);if(l){var m=g.get(t);m.onsuccess=function(b){var p=window.URL||window.webkitURL,D=p.createObjectURL(new Blob([b.target.result]));a(D)}}else{var m=g.put(o,t);m.onsuccess=function(p){m=g.get(t),m.onsuccess=function(D){var h=window.URL||window.webkitURL,v=h.createObjectURL(new Blob([D.target.result]));a(v)}},m.onerror=function(p){a("error")}}},y.onupgradeneeded=function(f){f.target.result.createObjectStore(u,{})}})},_EnableMove(e){window.unitygameinstance.Module.DynCallCSFunc("EnableMove","vi",[typeof e],[e])},ChangeLoadCount(){window.unitygameinstance.Module.DynCallCSFunc("ChangeLoadCount","ii",["number"],[500])},LoadALLModels(e){window.unitygameinstance.Module.DynCallCSFunc("LoadMessage","viii",[typeof e,typeof c.loadcallback,typeof c.OnLoadAdapterSleep],[e,c.loadcallback,c.OnLoadAdapterSleep])},AddLoadQueue(e){window.unitygameinstance.Module.DynCallCSFunc("AddLoadQueue","viii",[typeof e,typeof c.loadcallback,typeof c.OnLoadAdapterSleep],[e,c.loadcallback,c.OnLoadAdapterSleep])},InitCamPos(e){window.unitygameinstance.Module.DynCallCSFunc("InitCamPos","vi",[typeof e],[e])},EnableLog(e){window.unitygameinstance.Module.DynCallCSFunc("EnableLog","vi",[typeof e],[e])},LoadPictureU3D(e){window.unitygameinstance.Module.DynCallCSFunc("LoadTextureZipCS","vii",[typeof e,typeof this.LoadTextureCallback],[e,this.LoadTextureCallback])},LoadTextureCallback(e){},_SetAllLODsSRTH(e){var n=setInterval(()=>{var t;((t=window.unitygameinstance)==null?void 0:t.Module.SetAllLODsSRTH)!=null&&(clearInterval(n),window.unitygameinstance.Module.DynCallCSFunc("SetAllLODsSRTH","vf",[typeof e],[e]))},1e3)},_ResetGizmoPos(){var e;((e=window.unitygameinstance)==null?void 0:e.Module.ResetGizmoPos)!=null&&window.unitygameinstance.Module.DynCallCSFunc("ResetGizmoPos","v",[],[])}};const i=c;return{EnableClick(e,n){return i._EnableClick(e,n)},SetSelectionInnerColor(e,n,t,o){return i._SetSelectionInnerColor(e,n,t,o)},GetPropertyById(e,n){return i._GetPropertyById(e,n)},GetObjectAllPropertiesById(e){return i._GetObjectAllPropertiesById(e)},SetHoverLayer(e){return i._SetHoverLayer(e.join(" "))},ClearHoverLayer(){return i._ClearHoverLayer()},EnableHover(e,n){return i._EnableHover(e,n)},SetClickLayer(e){return i._SetClickLayer(e.join(" "))},ClearClickLayer(){return i._ClearClickLayer()},EnableDrag(e,n,t){return i._EnableDrag(e,n,t)},SetDragLayer(e){return i._SetDragLayer(e)},ClearDragLayer(){return i._ClearDragLayer()},ShowSelects(){return i._ShowSelects()},GetShownObjs(){return i._GetShownObjs()},ShowObj(e){return i._ShowObj(e)},ShowSelects(e){return i._ShowSelects(e)},HideObj(e){return i._HideObj(e)},HideAllObjs(){return i._HideAllObjs()},HideObj(e){return i._HideObj(e)},GetHiddenObjs(){return i._GetHiddenObjs()},GetComponentsInfo(e){return i._GetComponentsInfo(e)},EnableRectSelect(e,n){return i._EnableRectSelect(e,n)},GetLayers(){return i._GetLayers()},ID2UUID(e){return i._ID2UUID(e)},UUID2ID(e){return Number(i._UUID2ID(e))},GetPlayerInfo(){return i._GetPlayerInfo()},EnableMove(e){return i._EnableMove(e)},SetPlayerPosition(e,n,t){return i._SetPlayerPosition(e,n,t)},SetPlayerEuler(e,n,t){return i._SetPlayerEuler(e,n,t)},SetObjectEuler(e,n,t,o){return i._SetObjectEuler(e.toString(),n,t,o)},SetObjectPosition(e,n,t,o){return i._SetObjectPosition(e.toString(),n,t,o)},AddInputTextUI(e,n,t){return i._AddInputTextUI(e,n,t)},AddLineUI(e,n,t){return i._AddLineUI(e,n,t)},AddBoxUI(e,n,t){return i._AddBoxUI(e,n,t)},AddAnnulusUI(e,n,t){return i._AddAnnulusUI(e,n,t)},AddArrowUI(e,n,t){return i._AddArrowUI(e,n,t)},EnableCreate3DUI(e){return i._EnableCreate3DUI(e)},EnableKeyboard(e){return i._EnableKeyboard(e)},EnableMultiLineTool(e,n,t){return i._EnableMultiLineTool(e,n,t)},EnableAngleTool(e,n){return i._EnableAngleTool(e,n)},EnableVolumeTool(e,n){return i._EnableVolumeTool(e,n)},EnableMinDistanceTool(e,n){return i._EnableMinDistanceTool(e,n)},EnableAreaTool(e,n,t){return i._EnableAreaTool(e,n,t)},EnableLengthTool(e,n){return i._EnableLengthTool(e,n)},SetLightData(e){return i._SetLightData(e)},SetSkybox(e){return i._SetSkybox(e)},SetVolumeData(e){return i._SetVolumeData(e)},EnableAnimationRecord(e,n){return i._EnableAnimationRecord(e,n)},PlayAnimation(e,n){return i._PlayAnimation(e,n)},SetAnimationFrame(e){return i._SetAnimationFrame(e)},RemoveAllAnnotations(){return i._RemoveAllAnnotations()},AddLight(e,n){return i._AddLight(e,n)},RemoveAllLights(){return i._RemoveAllLights()},SetEnvironmentLight(e){return i._SetEnvironmentLight(e)},EnableSceneEdit(e){return i._EnableSceneEdit(e)},ImportSceneTempData(){return i._ImportSceneTempData()},CompleteAllAnnotations(){return i._CompleteAllAnnotations()},RemoveAllMeasureTools(){return i._RemoveAllMeasureTools()},HideAllMeasureTools(e){return i._HideAllMeasureTools(e)},SetLODsScreenRelativeTransitionHeight(e){return i._SetLODsScreenRelativeTransitionHeight(e)},AllToTransById(e,n){return i._AllToTransById(e,n)},AllToPbrById(e){return i._AllToPbrById(e)},ToTransById(e,n,t){return i._ToTransById(e,n,t)},ToPbrById(e,n){return i._ToPbrById(e,n)},LookAtPos(e){let n={x:e.x,y:e.y,z:e.z};return i._LookAtPos(n)},ZoomIn(){return i._ZoomIn()},ZoomOut(){return i._ZoomOut()},ToPerspective(e){return i._ToPerspective(Number(e))},ToOrthographic(e){return i._ToOrthographic(Number(e))},FrontView(e){return i._FrontView(Number(e))},BackView(e){return i._BackView(Number(e))},LeftView(e){return i._LeftView(Number(e))},RightView(e){return i._RightView(Number(e))},TopView(e){return i._TopView(Number(e))},BottomView(e){return i._BottomView(Number(e))},EnableObservation(e){i._EnableObservation(e)},ChangeMaterialInfo(e,n){let t=JSON.stringify(n);i._ChangeMaterialInfo(e,t)},StartCrossById(e){i._StartCrossById(Number(e))},StartCrossByModelRoot(){i._StartCrossByModelRoot()},RestoreCross(){i._RestoreCross()},ReCalculateBounds(){i._ReCalculateBounds()},LoadGlbAsync(e,n,t,o,l){return i._LoadGlbAsync(e,n,t,o,l)},GameObjSetActive(e,n,t){return i._GameObjSetActive(e,n,t)},LoadAndInstantiate(e,n,t){return i._LoadAndInstantiate(e,n,t)},InstantiateObject(e,n,t,o){return i._InstantiateObject(e,n,t,o)},UnLoadAssetBundle(e,n,t){return i._UnLoadAssetBundle(e,n,t)},UnloadAllAssetBundles(e,n){return i._UnloadAllAssetBundles(e,n)},DestroyObject(e,n){return i._DestroyObject(e,n)},DestroyAllObject(e){return i._DestroyAllObject(e)},EnableWalk(e){return i._EnableWalk(e)},GetBoundsSizeByID(e){return i._GetBoundsSizeByID(e.toString())},GetBoundsCenterByID(e){return i._GetBoundsCenterByID(e.toString())},GetMainCanvasWH(){return i._GetMainCanvasWH()},UIAutoFit(e){return i._UIAutoFit(e)},createElement(){return i._createElement()},addEleEvent(){return i._addEleEvent()},init(){return i._init()},quitUnity1(){return i._quitUnity()},onUnmountedunity(){return i._onUnmountedunity()},AddTags(e,n){return i._AddTags(JSON.stringify(e),n)},RemoveTag(e){return i._RemoveTag(e)},RemoveAllTags(){return i._RemoveAllTags()},UpdateTags(e,n){return i._UpdateTags(JSON.stringify(e),n)},SetTextAlignment(e){return i._SetTextAlignment(e)},SetTextFont(e){return i._SetTextFont(e)},SetTextColor(e,n,t,o){return i._SetTextColor(e,n,t,o)},SetTextSize(e){return i._SetTextSize(e)},SetRouteWidth(e){return i._SetRouteWidth(e)},SetRouteColor(e,n,t,o){return i._SetRouteColor(e,n,t,o)},SetRouteMaterial(e){return i._SetRouteMaterial(e)},SetRouteVisible(e){return i._SetRouteVisible(e)},SetRoamSpeed(e){return i._SetRoamSpeed(e)},PauseRoam(e){return i._PauseRoam(e)},EndRoam(){return i._EndRoam()},ChangeRoamPoint(e){return i._ChangeRoamPoint(e)},RoamArriveEvent(e){return i._RoamArriveEvent(e)},StartRoam(e){return i._StartRoam(JSON.stringify(e))},SetPropertyById(e,n,t){typeof t=="boolean"&&(t==!0?t="True":t="False"),i._SetPropertyById(e,n,t)},GetObjectByName(e){return i._GetObjectByName(e)},GetObjectByLayer(e){return i._GetObjectByLayer(e)},GetObjectByType(e){return console.log(e),i._GetObjectByType(e)},GetObjectChilds(e){return i._GetObjectChilds(e)},AddObject(e,n,t,o,l){var a={x:t.x,y:t.y,z:t.z},s={x:o.x,y:o.y,z:o.z},r={x:l.x,y:l.y,z:l.z},u={type:e,Id:n,position:a,eulerAngle:s,localScale:r};return i._AddObject(u)},CloneObject(e,n,t){return(t=null)&&(t=!0),i._CloneObject(e,n,t)},DoMove(e,n,t){var o={x:n.x,y:n.y,z:n.z};return i._DoMove(e,o,t)},DoLocalMove(e,n,t){var o={x:n.x,y:n.y,z:n.z};return i._DoLocalMove(e,o,t)},DoRotate(e,n,t){var o={x:n.x,y:n.y,z:n.z};return i._DoRotate(e,o,t)},DoLocalRotate(e,n,t){var o={x:n.x,y:n.y,z:n.z};return i._DoLocalRotate(e,o,t)},DoLocalScale(e,n,t){let o={x:n.x,y:n.y,z:n.z};return i._DoLocalScale(e,o,t)},GetMainCameraId(){let e=i._GetMainCameraId();return Number(e)},GetCullingMask(e){return i._GetCullingMask(Number(e))},SetCullingMask(e,n){return i._SetCullingMask(Number(e),[n])},AddCullingMask(e,n){return i._AddCullingMask(Number(e),n)},RemoveCullingMask(e,n){return i._RemoveCullingMask(Number(e),n)},FocusObject(e,n){return i._FocusObject(e,Number(n))},FocusObjectOffset(e,n,t,o){let l={x:t.x,y:t.y,z:t.z},a=null;return o!=null&&(a={x:o.x,y:o.y,z:o.z}),i._FocusObjectOffset(e,n,l,a)},HighLightById(e,n,t,o){let l=null;o.color!=null&&(l={r:o.color.r,g:o.color.g,b:o.color.b,a:o.color.a});let a={_intensity:o.intensity,_isOn:o.isOn,_color:l,_width:o.width,_speed:o.speed,_texture:o.texture,_blending:o.blending,_initialScale:o.initialScale,_endScale:o.endScale,_noise:o.noise};return i._HighLightById(e,n,t,a)},Downloade(e){return i._Downloade(e)},InitModel(e,n){return i._InitModel(JSON.stringify(e),n)},AllToTransById(e,n){return i._AllToTransById(e,n)},AllToPbrById(e){return i._AllToPbrById(e)},ToTransById(e,n,t){return i._ToTransById(e,n,t)},ToPbrById(e,n){return i._ToPbrById(e,n)},EnableMove(e){return i._EnableMove(e)},LookAtPos(e){let n={x:e.x,y:e.y,z:e.z};i._LookAtPos(n)},SetAllLODsSRTH(e){return i._SetAllLODsSRTH(e)},ResetGizmoPos(){i._ResetGizmoPos()}}});
